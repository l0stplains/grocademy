<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>{{title}}</title>
  <link rel="stylesheet" href="/static/css/styles.css" />
  <script defer src="/static/assets/js/app.js"></script>
</head>
<body>
  {{> navbar user=user}}
  {{#if flash}}<div class="container"><div class="alert success">{{flash}}</div></div>{{/if}}
  {{#if error}}<div class="container"><div class="alert error">{{error}}</div></div>{{/if}}

  <main class="container">
    <article class="card">
      <div class="row" style="align-items:flex-start">
        <img class="thumb" style="max-width:340px" src="{{course.thumbnail_image}}" alt="" onerror="this.style.display='none'">
        <div style="flex:1">
          <h1>{{course.title}}</h1>
          <p class="muted">Instructor: {{course.instructor}}</p>
          <p>{{course.description}}</p>
          <div style="margin:.5rem 0">
            {{#each course.topics}}
              <span class="badge topic">{{this}}</span>
            {{/each}}
          </div>
          <div class="row" style="gap:8px;margin-top:10px">
            {{#if course.is_purchased}}
              <a class="btn primary" href="/courses/{{course.id}}/modules">Go to Modules</a>
              <a id="certificate-link" class="btn {{#unless certificate_url}}hidden{{/unless}}" href="{{certificate_url}}" target="_blank">Download Certificate</a>
            {{else}}
              <form class="inline" method="post" action="/courses/{{course.id}}/buy">
                <button class="btn primary" type="submit">Buy for ${{course.price}}</button>
              </form>
            {{/if}}
          </div>
        </div>
      </div>
    </article>
  </main>
  {{> footer year="2025"}}
</body>
</html>